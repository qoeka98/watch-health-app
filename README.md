# watch-health-app


🔗 **배포 링크**: [🚀https://watch-health-app-ljurrnkvhldnnkpdsvzrrh.streamlit.app/)  

# 📌 건강 예측 AI & 상담 챗봇 프로젝트 🚀

## 🏥 프로젝트 개요
이 프로젝트는 **Streamlit 기반 웹 애플리케이션**으로,
✅ **건강 위험 예측 AI** 🤖  
✅ **AI 기반 건강 상담 챗봇** 💬  
두 가지 기능을 통합하여 **사용자가 자신의 건강 상태를 예측하고, 필요한 건강 상담을 받을 수 있도록** 설계되었습니다.

---

## 🏗 기존 데이터와 추가된 변수

### 📊 기존 데이터셋 *(공공데이터 활용)*
- **신체정보**: 성별, 연령대(5세 단위), 신장(5cm 단위), 체중(5kg 단위), 허리둘레
- **건강검진 정보**: 시력, 청력, 수축기 혈압, 이완기 혈압, 식전혈당, 총콜레스테롤, 트리글리세라이드, HDL/LDL 콜레스테롤
- **기타 건강 정보**: 혈색소, 요단백, 혈청크레아티닌, AST/ALT 간 기능 수치, 감마GTP
- **생활습관**: 흡연 여부, 음주 여부, 구강검진 여부
- **치과 검사**: 치아우식증, 치석, 결손치 여부, 치아마모증, 사랑니 이상 여부

### 🔍 추가된 컬럼들
✅ **BMI 기반 위험도 계산**  
- `BMI_고혈압위험` = ((BMI - 25) / (30 - 25)) * 100  
- `BMI_당뇨위험` = ((BMI - 23) / (30 - 23)) * 100  
- `BMI_고지혈증위험` = ((BMI - 25) / (30 - 25)) * 100  

✅ **흡연과 음주 위험 가중치 추가**  
- `흡연위험` = 흡연자는 20점 추가  
- `음주위험` = 음주자는 15점 추가  

✅ **최종 질병 위험 점수 계산**  
- `최종_당뇨위험` = (BMI_당뇨위험 + 흡연위험 * 1.25 + 음주위험 * 0.66).clip(upper=100)  
- `최종_고지혈증위험` = (BMI_고지혈증위험 + 흡연위험 + 음주위험 * 1.33).clip(upper=100)  

✅ **고혈압 위험 점수 최적화**  
- `고혈압위험점수` = (SBP, DBP, SBP_Risk, DBP_Risk 평균) * 1.2  
- `최종_고혈압위험` = (고혈압위험점수 * 0.7 + BMI_고혈압위험 * 0.2 + 흡연위험 * 0.05 + 음주위험 * 0.05).clip(upper=100)  

🏆 **결과적으로 더 정확한 건강 예측 가능!**

---
## 🔬 **질병 예측 AI 모델 개발**

🚀 **두 가지 회귀 모델을 비교하여 최적의 성능을 찾았습니다.**

# 모델 비교
| 모델                  | R² Score | 평균 절대 오차 (MAE) |
|-------------------|---------|------------------|
| **Linear Regression**  | 78%    | 8.4155           |
| **XGBoost Regressor**  | **99%** ✅ | **0.1144** ✅ |

🎯 **결론:**  
✅ **XGBoost Regressor가 훨씬 높은 정확도를 보이며 최종 선택!**  
✅ **MAE가 8.42 → 0.11로 감소하여 예측 정확도가 크게 향상됨!**  



---

## 💬 AI 건강 상담 챗봇 개발

### 🎯 LLM 기반 챗봇 설계
✅ **Hugging Face의 `google/gemma-2-9b-it` 모델 채택!**  
✅ **의료 상담 특화 프롬프트 엔지니어링 적용!**  

### 🔥 Gemma 시스템 프롬프트 최적화
🤖 **AI가 정확한 건강 상담을 제공할 수 있도록 시스템 프롬프트를 최적화했습니다!**  

📌 **건강 관련 질문만 처리하도록 설계**  
- 사용자의 입력을 분석해 **의료 및 건강 키워드만 응답하도록 필터링**  
- 의료와 관련 없는 질문은 자동으로 거부  

📌 **AI가 더 정확한 답변을 제공하도록 최적화**  
- 질문을 분석하여 핵심 내용을 빠르게 이해할 수 있도록 간결한 표현 사용  
- **중요한 정보는 강조하여** AI가 놓치지 않도록 설계  

🎯 **결과:**  
✔️ **더 자연스럽고 의료적인 답변 제공 가능!**  
✔️ **의료 상담 관련 질문이 아닐 경우, 필터링하여 응답 조정!**  

---

## 🔐 API 관리 및 보안 강화

✅ **Hugging Face API 활용**  
✅ **API 키 보안 강화를 위해 `.gitignore`에 API 키 추가**  
✅ **배포 시 API 키 노출 방지하여 안전한 운영 가능!**  

---

## 🚀 배포 및 유지보수
📌 **배포를 위한 `requirements.txt` 작성**  
📌 **Hugging Face API를 사용하여 원활한 모델 실행**  
📌 **.gitignore에 API 키 포함하여 보안 강화**  

---

## 🎯 결론
✅ **XGBoost Regressor를 활용한 99% R² Score의 질병 예측 AI 구축!**  
✅ **Hugging Face `google/gemma-2-9b-it` 모델을 활용한 건강 상담 챗봇 개발!**  
✅ **Streamlit 기반으로 간편하게 배포할 수 있는 웹 애플리케이션 완성!**  

🔥 **AI 기반 건강 예측 & 상담 서비스의 새로운 가능성을 제시한 프로젝트!** 🚀

---

## 📌 프로젝트 정보
- **데이터 출처**: [공공데이터 포털](https://www.data.go.kr/data/15007122/fileData.do)
- **개발자 깃허브**: [GitHub Repository](https://github.com/qoeka98/watch-health-app)
- **문의 이메일**: vhzkflfltm6@gmail.com




